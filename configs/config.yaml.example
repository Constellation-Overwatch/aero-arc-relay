relay:
  buffer_size: 1000

mavlink:
  # Dialect options: common, minimal, ardupilot, standard, paparazzi, px4, development, all
  # For PX4 firmware: use "all" (includes all messages) or "px4" (development dialect)
  # For ArduPilot firmware: use "ardupilot"
  dialect: "all"
  endpoints:
    - name: "drone-1"
      protocol: "udp"
      drone_id: "drone-alpha-uuid"
      mode: "1:1"
      port: 14550
    # - name: "drone-2"
    #   protocol: "udp"
    #   drone_id: "drone-beta-uuid"
    #   mode: "1:1"
    #   port: 14551

sinks:
  nats:
    url: "nats://localhost:4222"
    subject: "constellation.telemetry.{entity_id}.{message_type}" # 1:1 mode pattern
    token: "${NATS_TOKEN}" # JWT token for authentication (from env)
    # creds_file: "/path/to/nats.creds"  # Alternative auth method
    queue_size: 1000
    backpressure_policy: "drop"
    stream:
      name: "CONSTELLATION_TELEMETRY"
      subjects:
        - "constellation.telemetry.>"
      storage: "file" # "memory" or "file"
      max_age: "24h"
      max_msgs: 1000000
      compression: true
    kv:
      bucket: "CONSTELLATION_GLOBAL_STATE"
      key_pattern: "{entity_id}.mavlink" # Key: drone-alpha.mavlink
      description: "MAVLink device state for latest state"
      storage: "file" # "memory" or "file"
      ttl: "1h" # Values expire after 1 hour of no updates
      # message_types:  # Optional: defaults to all state-relevant types
      #   - "Heartbeat"
      #   - "GlobalPositionInt"
      #   - "Attitude"
      #   - "SystemStatus"
      #   - "VFR_HUD"

  file:
    path: "/tmp/log/aero-arc-relay"
    prefix: "telemetry"
    format: "json"
    rotation_interval: "24h"
  # gcs:
  #   bucket: "aero-arc-telemetry-data-dev"
  #   project_id: "aero-arc-relay"
  #   credentials: "/home/makinje/aero-arc-relay/secrets/service-account.json"  # Path to GCP service account JSON file
  #   prefix: "telemetry"
  #   flush_interval: "30s"
  # s3:
  #   bucket: "aero-arc-relay-telemetry"
  #   region: "us-east-1"
  #   access_key: "${AWS_ACCESS_KEY_ID}"  # Use environment variables, never hardcode
  #   secret_key: "${AWS_SECRET_ACCESS_KEY}"
  #   prefix: "telemetry"
  #   flush_interval: "1m"
  # kafka:
  #   brokers:
  #     - "localhost:9092"  # For local Kafka container
  #   topic: "quickstart-events"  # Choose your topic name

logging:
  level: "info"
  format: "text"
  output: "stdout"
